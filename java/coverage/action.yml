name: 'MA Java CI Coverage'
description: 'A collection of common java jobs and cache operations'
runs:
  using: "composite"
  steps:
    - uses: actions/checkout@v3
    - name: Download artifect from test results
      uses: actions/download-artifact@v3
      with:
        name: test-results
    - name: Find files and Send DeepSource
      shell: bash
      run: | 
        # Install the CLI
        curl https://deepsource.io/cli | sh
        # Send the reports to DeepSource
        xmlFiles=( $(find . -type f -regex ".*/reports/jacoco/test/jacocoTestReport.xml") )                                                    ✔  at 16:03:01 
        for i in ${xmlFiles[@]}
        do
           ./bin/deepsource report --analyzer test-coverage --key java --value-file $i
        done
